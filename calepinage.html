<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Calepinage Pro - Cuisine</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; }
        .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        label { display: block; font-size: 0.8em; color: #666; }
        input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        canvas { border: 2px solid #333; background: #fff; cursor: crosshair; }
        .stats { margin-top: 20px; padding: 15px; background: #eef; border-radius: 4px; display: flex; justify-content: space-around; }
        .pro-tip { font-size: 0.85em; color: #d9534f; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>üìè Simulateur de Calepinage Expert</h2>
    
    <div class="controls">
        <div>
            <label>Largeur Totale (cm)</label>
            <input type="number" id="roomW" value="500" oninput="draw()">
        </div>
        <div>
            <label>Longueur Totale (cm)</label>
            <input type="number" id="roomH" value="400" oninput="draw()">
        </div>
        <div>
            <label>Largeur Carreau (cm)</label>
            <input type="number" id="tileW" value="60" oninput="draw()">
        </div>
        <div>
            <label>Hauteur Carreau (cm)</label>
            <input type="number" id="tileH" value="60" oninput="draw()">
        </div>
        <div>
            <label>Joint (mm)</label>
            <input type="number" id="joint" value="3" oninput="draw()">
        </div>
    </div>

    <canvas id="canvas"></canvas>

    <div class="stats" id="results">
        </div>
    <p class="pro-tip">‚ö†Ô∏è Pr√©voir +10% de marge pour les pertes et la casse au magasin.</p>
</div>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    function draw() {
        const rW = parseFloat(document.getElementById('roomW').value);
        const rH = parseFloat(document.getElementById('roomH').value);
        const tW = parseFloat(document.getElementById('tileW').value);
        const tH = parseFloat(document.getElementById('tileH').value);
        const joint = parseFloat(document.getElementById('joint').value) / 10;

        // Mise √† l'√©chelle pour le canvas (max 800px)
        const scale = Math.min(800 / rW, 500 / rH);
        canvas.width = rW * scale;
        canvas.height = rH * scale;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Dessin de la pi√®ce (Rectangle simple pour l'exemple, adaptable en polygone)
        ctx.strokeStyle = "#333";
        ctx.lineWidth = 3;
        ctx.strokeRect(0, 0, canvas.width, canvas.height);

        let count = 0;
        
        // Boucle de calepinage
        for (let x = 0; x < rW; x += tW + joint) {
            for (let y = 0; y < rH; y += tH + joint) {
                ctx.strokeStyle = "#4A90E2";
                ctx.lineWidth = 1;
                
                // Dessin du carreau
                let drawW = Math.min(tW, rW - x);
                let drawH = Math.min(tH, rH - y);
                
                ctx.strokeRect(x * scale, y * scale, drawW * scale, drawH * scale);
                count++;
            }
        }

        const surface = (rW * rH) / 10000;
        document.getElementById('results').innerHTML = `
            <div><strong>Surface :</strong> ${surface.toFixed(2)} m¬≤</div>
            <div><strong>Carreaux approx :</strong> ${count} unit√©s</div>
            <div><strong>Format :</strong> ${tW}x${tH} cm</div>
        `;
    }

    draw();
</script>
</body>
</html>
